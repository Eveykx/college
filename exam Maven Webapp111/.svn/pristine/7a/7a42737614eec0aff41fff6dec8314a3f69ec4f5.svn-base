package cn.edu.nenu.clzc.dao.examination;

import java.sql.SQLException;
import java.util.Date;

import cn.edu.nenu.clzc.commons.core.AbstractDao;
import cn.edu.nenu.clzc.commons.core.expandhandler.ExpandBeanHandler;
import cn.edu.nenu.clzc.commons.entites.examination.ParamEdition;
import cn.edu.nenu.clzc.commons.enumeration.exception.DaoExceptionEnum;
import cn.edu.nenu.clzc.commons.exception.ContextException;
import cn.edu.nenu.clzc.commons.vo.examination.ParamEditionVo;


/**
* @param <ParamEditionVo>
 * @Author Kyrie Irving
* @Title: ParamEditionDao 
* @Description: 册操作的dao方法
* @Date 2016年11月18日 下午9:00:11
 */



public class ParamEditionDao extends AbstractDao {
	
	/**
	* @Title: addEdition 
	* @Author Kyrie Irving
	* @Description: 添加一个册(这里用一句话描述这个方法的作用) 
	* @param @param ParamEdition
	* @param @return
	* @param @throws Exception    设定文件 
	* @return String    返回类型 
	* @throws
	 */
	public String addEdition(ParamEdition ParamEdition) throws Exception {
		
		String editionName = ParamEdition.getEditionName();
		String editionInfo = ParamEdition.getEditionInfo();
		Date editionTime = ParamEdition.getEditionTime();
		
		Object[] params = { editionName, editionInfo, editionTime};
		String sql = "INSERT INTO param_edition (edition_name , edition_info , edition_time)VALUES(?, ?, ?)";
		String id1 = null;
		try {
			id1 = insert(sql, params);
		} catch (ContextException | SQLException e) {
			logger.error(DaoExceptionEnum.AddEditionFaild.getInfo(),e);
			throw new Exception(DaoExceptionEnum.AddEditionFaild.getInfo());
		}
		return id1;
	}
	
	
	/**
	* @Title: updateEdition 
	* @Author Kyrie Irving
	* @Description: 删除册，根据id修改册的显示状态(这里用一句话描述这个方法的作用) 
	* @param @param id
	* @param @param editionIsDelete
	* @param @return
	* @param @throws Exception    设定文件 
	* @return int    返回类型 
	* @throws
	 */
	public int updateEdition(String id,String editionIsDelete) throws Exception {
		Object[] params = {editionIsDelete,id};
		String sql = "UPDATE param_edition SET edition_is_delete =? WHERE  id = ?" ;
		int ue = 0;
		try {
			ue = update(sql, params);
		} catch (ContextException e) {
			logger.error(DaoExceptionEnum.UpdateEditionFaild.getInfo(),e);
			throw new Exception(DaoExceptionEnum.UpdateEditionFaild.getInfo());
		}
		return ue;
	}


	/**
	* @Title: selectByEditionName
	* @Description:  根据册名顺序查找试卷(这里用一句话描述这个方法的作用)
	* @author Kyrie Irving
	* @param @param editionName
	* @param @param currentPage
	* @param @return
	* @param @throws Exception    设定文件
	* @return List<ParamEditionVo>    返回类型
	* @throws
	 */
	
	public ParamEditionVo selectByEditionInfo(String editionInfo) throws Exception {
		String sql = "SELECT param_edition.edition_name,param_edition.edition_info,param_edition.edition_time FROM param_edition WHERE param_edition.edition_is_delete='0' AND param_edition.edition_info LIKE ? ";
		Object[] params = {"%"+editionInfo+"%"};
		ParamEditionVo paramEditionVo = null;
		try {
			paramEditionVo = query(sql, new ExpandBeanHandler<ParamEditionVo>(ParamEditionVo.class),params);
		} catch (ContextException e) {
			logger.error(DaoExceptionEnum.SelectEditionByEditionNameFaild.getInfo(),e);
			throw new Exception(DaoExceptionEnum.SelectEditionByEditionNameFaild.getInfo());
		}
		return paramEditionVo;
	}
	
	



}
